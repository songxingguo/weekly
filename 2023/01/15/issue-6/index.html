<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="keywords" content="" />
  <meta name="author" content="John Doe" />
  <meta name="description" content="" />
  
  
  <title>
    
      Hexo
    
  </title>

  
    <link rel="apple-touch-icon" href="/images/favicon.png">
    <link rel="icon" href="/images/favicon.png">
  

  <!-- Raleway-Font -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto:400,400italic,600|Roboto+Mono" rel="stylesheet">

  <!-- hexo site css -->
  
<link rel="stylesheet" href="/weekly/css/base.css">
<link rel="stylesheet" href="/weekly/css/common.css">
<link rel="stylesheet" href="/weekly/iconfont/iconfont.css">


  

  
    
<link rel="stylesheet" href="/weekly/css/post.css">

  

  <!-- jquery3.3.1 -->
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

  <!-- fancybox -->
  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  <script async src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  
<script src="/weekly/js/fancybox.js"></script>


<meta name="generator" content="Hexo 6.3.0"></head>


  <body>
    <div id="app">
      <div class="header">
  <a href="/">LEEDOM</a>
</div>


      <p class="links">
  
    <a title="archives" target="" href="/archives/">
      <i class="iconfont icon-bookmark"></i>
    </a>
  
    <a title="github" target="_blank" href="https://github.com/leedom92/hexo-theme-leedom">
      <i class="iconfont icon-github"></i>
    </a>
  
    <a title="email" target="" href="">
      <i class="iconfont icon-envelope"></i>
    </a>
  
    <a title="facebook" target="" href="">
      <i class="iconfont icon-facebooksquare"></i>
    </a>
  
    <a title="twitter" target="" href="">
      <i class="iconfont icon-twitter"></i>
    </a>
  
    <a title="wechat" target="" href="">
      <i class="iconfont icon-wechat"></i>
    </a>
  
    <a title="weibo" target="" href="">
      <i class="iconfont icon-weibo"></i>
    </a>
  
    <a title="rss" target="_blank" href="/atom.xml">
      <i class="iconfont icon-rss"></i>
    </a>
  
</p>


      <div class="main">
        <!-- 文章详情页，展示文章具体内容，url形式：https://yoursite/文章标题/ -->
<!-- 同时为「标签tag」，「朋友friend」，「分类categories」，「关于about」页面的承载页面，具体展示取决于page.type -->

<!-- LaTex Display -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    }
  };
</script>

<div class="post">
  <h3 class="date">
    Jan 15, 2023
  </h3>
  <h1>
    
  </h1>
  <div class="content markdown-body">
    <h1 id="每周分享第-6-期"><a href="#每周分享第-6-期" class="headerlink" title="每周分享第 6 期"></a>每周分享第 6 期</h1><p>这里记录过去一周，我看到的值得分享的东西，每周五发布。</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052501.jpg"></p>
<p>最近，我有一个行程，可能要去日本。我还没去过日本呢，听说日本人普遍听不懂英语，我又不会说日语，这可怎么办？</p>
<p>突然想到，”谷歌翻译”这个 APP 也许能解决语言问题。它有一个”对话实时翻译”功能，可以同时监听两种语言，听到中文就自动说出日语，听到日语就说出中文。我试了一下，翻译效果之好令人震惊，完全是真人发音，翻译非常准确。建议大家也装一个玩玩，亲身体验自己说出的话变成流利的日语，肯定能震撼到你。</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2019052502.jpg"></p>
<p>两个人同时对着手机说话，还是比较尴尬的，因此谷歌还推出了 Buds 蓝牙耳机。你说出的话通过耳机的话筒传入手机，让手机播放翻译好的版本给对方听。对方的回应被翻译以后，再通过耳机传给你。这样的话，对话可以始终是面对面。</p>
<p>看着这个玩意，我心想将来还需要苦学外语吗？很多人学了十年，口语还是结结巴巴，词不达意。照我说，那就别学了，大好青春干什么不好，何必用来背单词，反正以后人工智能可以帮你说外语。</p>
<h2 id="新闻"><a href="#新闻" class="headerlink" title="新闻"></a>新闻</h2><p>1、<a target="_blank" rel="noopener" href="https://www.independent.co.uk/arts-entertainment/wildlife-photographer-year-winner-disqualified-competition-judges-stuffed-anteater-a8325691.html">摆拍的野生动物</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052503.jpg"></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052504.jpg"></p>
<p>世界野生动物摄影大赛最近宣布，取消一位摄影师的获奖资格。因为他拍摄的《夜晚的食蚁兽》是假的，是用一只标本摆拍的。</p>
<p>2、<a target="_blank" rel="noopener" href="http://new.qq.com/omn/20180503/20180503F11JV1.html">高中教材《人工智能基础》</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052505.jpg"></p>
<p>4月份，我国首部高中教材《人工智能基础》出版。下个学期就将在首批试点高校投入使用。根据<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/36415773">披露</a>，这本教材包含下面的内容。</p>
<blockquote>
<ol>
<li>总论：人工智能概述</li>
<li>经典图像分类（目明）</li>
<li>深度学习（目明）</li>
<li>音乐风格分类（耳聪）</li>
<li>相册聚类</li>
<li>自然语言理解（心灵）</li>
<li>生成模型（手巧）</li>
</ol>
</blockquote>
<p>如果真要学懂上面的内容，是不是意味着高中就必须掌握 Python 语言？</p>
<p>3、<a target="_blank" rel="noopener" href="https://cn.engadget.com/2018/05/11/boston-dynamics-atlas-run-jump/#">Boston Dynamic 公司的最新机器人</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052506.jpg"></p>
<p>Boston Dynamics 公司发布了新的视频，机器人直接在不平整的草地上慢跑了起来，甚至还小小地示范了一下”立定跳”，跳过了一根挡道的圆木。</p>
<p>想想将来，马路上迎面走来的是一个机器人。或者罪犯逃跑，警方放出一个机器人在他后面追……我觉得，最大胆的想象力恐怕都无法想象，未来几十年后的人类社会将变成什么样。</p>
<p>4、<a target="_blank" rel="noopener" href="https://www.cbsnews.com/news/digital-photocopiers-loaded-with-secrets/">数字复印机的安全问题</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052507.jpg"></p>
<p>这周看到一篇2010年的老文章，提醒了大家一个很容易忽略的问题：数字复印机内部的硬盘会保存复印的文件。</p>
<p>每当你复印了一份文件，文件就保存在硬盘上了。然后，其他人就可以从硬盘还原出你复印的内容。</p>
<p>5、<a target="_blank" rel="noopener" href="https://www.thelocal.it/20180511/pompeii-horse">庞培古城发现古代马匹的……身影</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052508.jpg"></p>
<p>庞培是古罗马被火山喷发毁灭的城市，火山岩浆覆盖了一切。当时有一匹马被岩浆包裹了，久而久之就形成了岩层里面的一个空腔。考古学家将石膏灌入空腔，结果就发现了这里原来有一匹马。</p>
<p>6、<a target="_blank" rel="noopener" href="https://www.cooley.com/news/insight/2018/2018-04-18-whois-blackout-period-likely-starting-in-may">Whois 查询违法</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052509.jpg"></p>
<p>买过域名的人都知道，域名注册信息可以在网上查到（你的姓名、电话、地址），这叫 Whois 查询。如果不想被看到，就要花钱让注册商帮你藏起来。</p>
<p>但是，这违反即将在欧洲生效的 GDPR 法律，你凭什么泄露我的个人信息！有文章称，whois会进行重大改革（只有注册商才能看到），甚至废除。</p>
<p>7、<a target="_blank" rel="noopener" href="https://blog.ropnop.com/extracting-ssh-private-keys-from-windows-10-ssh-agent/">Windows 10 原生支持 OpenSSH</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052510.jpg"></p>
<p>一直以来，Windows 系统不内置 SSH 支持，导致登录服务器和其他 Linux 设备非常麻烦，必须安装客户端（比如 Putty）。现在，Windows 10 的最新版已经内置 OpenSSH 支持了，SSH 登录再也不是问题了。</p>
<h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><p>1、[文章] <a target="_blank" rel="noopener" href="https://hackernoon.com/a-thorough-introduction-to-distributed-systems-3b91562c9b3c">分布式系统的全面介绍</a>（英文）</p>
<p>分布式系统的基本概念和基本知识，这篇文章都谈到了。</p>
<blockquote>
<p>什么是分布式系统？最简单的定义，分布式系统是一组计算机一起工作，对于最终用户只显示为一台计算机。这些机器具有共享状态，可以处理并发操作，如果其中一台机器发生故障，不会影响整个系统的正常运行。</p>
</blockquote>
<p>2、[教程] <a target="_blank" rel="noopener" href="https://www.enlightenment.org/docs/c/start" title="docs:c:start">C Primer</a>（英文）</p>
<p>一张网页的《C 语言的入门教程》，比较注重内存部分的讲解。写得不是很易读，但是还是可以看一下。</p>
<p>3、[教程] <a target="_blank" rel="noopener" href="http://www.businessinsider.com/17-equations-that-changed-the-world-2014-3/?IR=T">改变世界的17个数学公式</a>（英文）</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052511.jpg"></p>
<p>本文介绍了17个据说改变了世界的数学公式。数了一下，我知道9个。</p>
<p>4、[文章] <a target="_blank" rel="noopener" href="http://notes.eatonphil.com/writing-a-simple-json-parser.html">如何用 Python 实现一个简单的 JSON 解析器？</a>（英文）</p>
<p>代码还算简单，可以作为编译器的训练。</p>
<p>5、[文章] <a target="_blank" rel="noopener" href="https://blogs.dxc.technology/2018/05/08/everything-old-is-new-again-microservices/">Everything old is new again: Microservices</a>（英文）</p>
<p>这篇短文讨论了 SOA 架构（服务导向架构）和微服务架构的差异，为什么 SOA 会演变成微服务。</p>
<p>6、[文章] <a target="_blank" rel="noopener" href="https://jaminzhang.github.io/dns/The-Reason-of-There-Is-Only-13-DNS-Root-Servers/">只有 13 台 DNS 根域名服务器原因</a>（中文）</p>
<p>我们经常听到 DNS 根域名服务有 13 台，那么是为什么呢？ 今天我们来深入了解下。</p>
<p>7、[PDF] <a target="_blank" rel="noopener" href="https://www.cs.helsinki.fi/u/kutvonen/index_files/linus.pdf">Linux: a Portable Operating System</a>（英文）</p>
<p>这是 Linus Torvalds 的硕士毕业论文，介绍 Linux 系统如何适配不同的硬件架构。这篇论文不涉及代码，只介绍一些概念性的东西，但也不是那么好懂，至少我没有完全看懂。对内核和操作系统感兴趣的朋友，可以读一下。</p>
<p>8、[文章] <a target="_blank" rel="noopener" href="https://jvns.ca/blog/2018/05/11/batch-editing-files-with-ed/">ed 命令的一种用法</a>（英文）</p>
<p>ed 是 Unix 系统里面最古老的命令行编辑器，但是功能并不弱。这篇文章介绍了一个使用 ed 的简单实例。</p>
<p>9、[游戏] <a target="_blank" rel="noopener" href="https://www.ostechnix.com/pacvim-a-cli-game-to-learn-vim-commands/">PacVim</a>（英文）</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052512.jpg"></p>
<p>通过吃豆子（PacMan）游戏学习 Vim 操作的命令行游戏。</p>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><p>1、<a target="_blank" rel="noopener" href="https://gitea.io/en-us/">Gitea</a></p>
<p>类似于 GitHub 和 GitLab 的开源项目，用于个人架设 Git 代码托管服务，使用 Go 语言实现。</p>
<p>2、<a target="_blank" rel="noopener" href="https://github.com/sindresorhus/ow">ow</a></p>
<p>JavaScript 语言没有类型检查，运行时无法知道函数的参数是否为指定的类型。这个库就用来检查函数参数的类型，如果不符合要求就抛错。</p>
<p>3、<a target="_blank" rel="noopener" href="https://github.com/feathericons/feather">Feature Icons</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052513.jpg"></p>
<p>一个开源图标库，提供一些 24x24 的常用图标。</p>
<p>4、<a target="_blank" rel="noopener" href="https://github.com/isomorphic-git/isomorphic-git">isomorphic-git</a></p>
<p>Git 的 JavaScript 实现，这意味着你可以在 JS 里进行 Git 操作，比如从抓取&#x2F;提交 commit，进行 diff 或 merge 等等。</p>
<p>5、<a target="_blank" rel="noopener" href="https://github.com/Tencent/PhoenixGo">PhoenixGo</a></p>
<p>腾讯公司根据 AlphaGo 的论文，实现的开源围棋软件。</p>
<p>6、<a target="_blank" rel="noopener" href="https://archiveos.org/">ArchiveOS</a></p>
<p>收集所有开源的操作系统的网站。</p>
<p>7、<a target="_blank" rel="noopener" href="https://github.com/huangyz0918/Hackintosh-Installer-University/blob/master/README-CN.md">黑苹果安装学院</a></p>
<p>自从苹果采用 Intel 的处理器，OS X 被黑客破解后可以安装在 Intel CPU 与部分 AMD CPU 的机器上。从而出现了一大批非苹果设备而使用苹果操作系统的机器，被称为黑苹果（Hackintosh）。这个仓库收集了各种型号的黑苹果安装方法。</p>
<p>8、<a target="_blank" rel="noopener" href="http://gen.lib.rus.ec/scimag/repository_torrent/">Sci-hub 的论文 BT 种子文件</a></p>
<p>Sci-hub 是最大的免费论文下载网站，几个主要的论文数据库公司都在起诉它。现在，它放出了它的所有论文的 BT 下载种子文件。</p>
<h2 id="文摘"><a href="#文摘" class="headerlink" title="文摘"></a>文摘</h2><p>1、<a target="_blank" rel="noopener" href="https://techcrunch.com/2016/08/26/co-founders-optional/">你一个人也可以创业</a>（英文）</p>
<p>无数文章告诉你，创业需要一个团队，你需要找联合创始人。但是，不一定非如此不可，数据表明没有联合创始人也是可以的。</p>
<blockquote>
<p>我查了 <a target="_blank" rel="noopener" href="http://data.crunchbase.com/">CrunchBase API</a> 里面的 7,348家公司，每家公司募集了超过1000万美元。几乎一半的公司只有一个创始人，不到三分之一的公司有两位创始人，只有22％的公司有三位或更多的创始人。创始人的平均数量是 1.85。</p>
<p>我又查了成功退出的公司的数据，这次包括筹集不到1000万美元的公司。这组数据包括6,191家公司，但独立创始人的优势更明显。超过一半的公司是由独立创始人创立的。只有三分之一有两位创始人，约18％有三位或更多的创始人。创始人的平均数量是1.72。</p>
</blockquote>
<p>2、<a target="_blank" rel="noopener" href="http://stfj.net/DesigningForSubwayLegibility/">三次阅读的模式</a>（英文）</p>
<p>人们看一样东西，其实不是看一次，而是会看三次。下面是一张演唱会海报。</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052514.jpg"></p>
<p>第一次看，只会注意核心信息，他只看到上面这些东西。</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052515.jpg"></p>
<p>如果感兴趣，他会看第二次，寻找更多的信息。</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052516.jpg"></p>
<p>如果真正想参与，他会看第三次，寻找所有信息。</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052517.jpg"></p>
<p>如果想要吸引用户，其实你只有一次机会。就是在他看第一次的时候，就吸引到他，也就是说，你必须在最显眼的地方，呈现最核心的内容。</p>
<p>3、<a target="_blank" rel="noopener" href="https://medium.com/@chris_47577/lessons-from-magic-kingdom-how-to-hack-positive-impressions-b0a1364cc174">迪斯尼乐园的湖</a>（英文）</p>
<p>美国佛罗里达州的迪斯尼乐园，停车场距离公园正门足足有1.6公里，中间是一个巨大的人工湖。为什么停车场不设置得近一些，一下车就能进入公园，不是对游客更方便吗？</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052518.jpg"></p>
<p>（上图：红色区域是停车场，绿色区域是乐园，中间是人工湖。）</p>
<p>迪斯尼公司花几百万美元挖一个湖，故意让游客多走将近两公里，这是为什么？</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052519.jpg"></p>
<p>游客从很远的地方来到乐园，他们可能开车了很长时间，途中也许遇到交通事故，也可能遇到交通堵塞，总之还处在真实世界的各种烦躁和焦虑之中。然后，他们下车后就看到了一个大湖，选择登上渡船或乘坐单轨列车前往乐园大门，一路上他们看到的都是湖景。等到了大门口，他们看到了城堡，就会忘记之前发生的一切，完全以崭新的心情，从真实的现实进入了梦幻的现实。</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052520.jpg"></p>
<p>（上图：红色区域是真实世界，绿色区域是你的产品，中间是一个隔离地带。）</p>
<p>对于其他产品来说，这也是一个可以借鉴的思路。现实中的用户处于痛苦和失望的状态，你需要为他们设置一个放松和缓冲的区域，与外部世界隔离，让他们以一种兴奋的状态，进入你的产品。</p>
<p>4、<a target="_blank" rel="noopener" href="https://cn.nytimes.com/science/20180428/eyebrow-evolution-expression/zh-hant/">《纽约时报》：眉毛的作用</a>（英文）</p>
<blockquote>
<p>4月9日發表在《自然生態與演化》(Nature Ecology &amp; Evolution)雜誌上的研究結果表明，人類的眉毛主要是一種社交工具，現代人類的前額更平滑，眉毛更具有表現力，也許是為了適應我們日益複雜的人際關係。</p>
<p>「有了更平坦、更豎直的前額，眼睛上方的整個區域就變得靈活了很多，肌肉也能做出一些非常微妙的交流示意，」斯皮金斯說。她表示，那些示意，比如揚起眉毛表示你認出了某人，「更多的是表示友好，而非恐嚇」。</p>
</blockquote>
<p>5、<a target="_blank" rel="noopener" href="https://www.19lou.com/forum-1660-thread-6341402186160680-1-1.html">一个癌症病人的美国求医经历</a>（中文）</p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052521.jpg"></p>
<blockquote>
<p>这是一位叫”倾心2007”的网友发在网上发的一个帖子。2012年春节，她老公被诊断为脊柱肿瘤，初诊时手术概率几乎为零。最后他们决定赴美治疗，这是她写的赴美就医经历。</p>
<p>她在文章的开头说，去美国看病只是人生绝望中孤注一掷的选择。写这个帖子，是想让更多人知道，”绝境还有其他希望”。当然，她写的不全是个励志故事。她还写道，在美国看病里时3个月，这期间没有住过一个月，没有挂过一瓶水，甚至也只吃了几颗药。让人觉得有点不可思议。</p>
</blockquote>
<h2 id="本周图片"><a href="#本周图片" class="headerlink" title="本周图片"></a>本周图片</h2><p>1、<a target="_blank" rel="noopener" href="https://github.com/cyanharlow/purecss-francine">CSS 油画</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052522.jpg"></p>
<p>上面这幅作品是纯 CSS 生成，作者还公开了源码。</p>
<p>2、<a target="_blank" rel="noopener" href="https://twitter.com/riddle_ling/status/994468150463807488">台北的垃圾箱地图</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052523.jpg"></p>
<p>台北市实行垃圾分类，马路上的垃圾箱很少。我在台北时，经常因为找不到垃圾箱，不得不去麦当劳或便利店扔垃圾。</p>
<p>推特网友@riddle_ling根据台北市政府的公开资料，做出了《台北垃圾箱地图》。我觉得，大陆城市应该学习，推广垃圾分类，编号管理每一个公共垃圾箱。</p>
<p>3、<a target="_blank" rel="noopener" href="https://github.com/MrMEEE/bumblebee-Old-and-abbandoned/commit/6cd6b2485668e8a87485cb34ca8a0a937e73f16d">最可怕的打字错误</a></p>
<p><img src="https://www.wangbase.com/blogimg/asset/201805/bg2018052524.jpg"></p>
<p>打字时多了一个空格，系统就要被删了。</p>
<h2 id="本周金句"><a href="#本周金句" class="headerlink" title="本周金句"></a>本周金句</h2><p>1、</p>
<p>千万别上瘾只想去解决那些困难的问题。如果那些问题本身就是错的，你会浪费时间；如果你解决不了，也会浪费时间。（<a target="_blank" rel="noopener" href="https://twitter.com/practicingdev/status/969561476854935558">@practicingdev</a>）</p>
<p>2、</p>
<p>没用分布式架构之前，你只有一个问题：并发性能不足。用了分布式架构，多出了一堆问题：数据如何同步、主键如何产生、如何熔断、分布式事务如何处理……（<a target="_blank" rel="noopener" href="https://weibo.com/1400854834/GfrLWiBCi">网友</a>）</p>
<h2 id="欢迎订阅"><a href="#欢迎订阅" class="headerlink" title="欢迎订阅"></a>欢迎订阅</h2><p>这个专栏每周五发布，同步更新在我的<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog">个人网站</a>、<a target="_blank" rel="noopener" href="http://weixin.sogou.com/weixin?query=%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97">微信公众号</a>和<a target="_blank" rel="noopener" href="https://yuque.com/ruanyf/share/">语雀</a>。</p>
<p>微信搜索”<strong>阮一峰的网络日志</strong>“或者扫描二维码，即可订阅。</p>
<p><img src="https://www.wangbase.com/blogimg/asset/2018/bg2018042311.jpg" alt="image | left"></p>
<p>（完）</p>

  </div>
  
    
      <a id="older" class="blog-nav" href="/weekly/2023/01/15/issue-60/">OLDER&nbsp;&gt;</a>
      
        
          <a id="newer" class="blog-nav" href="/weekly/2023/01/15/issue-59/">&lt;&nbsp;NEWER</a>
          
            
</div>
        <div class="footer">
  
    <div class="footer-more">
      
        <a target="_blank" rel="noopener" href="https://github.com/leedom92/hexo-theme-leedom">Copyright © Leedom 2021</a>
        
    </div>
  
    <div class="footer-more">
      
        <a target="_blank" rel="noopener" href="https://github.com/leedom92/hexo-theme-leedom">Theme by Leedom | Powered by Hexo</a>
        
    </div>
  
</div>

      </div>

      <div class="back-to-top hidden">
  <a href="javascript: void(0)">
    <i class="iconfont icon-chevronup"></i>
  </a>
</div>


<script src="/weekly/js/backtotop.js"></script>



      
  <div class="search-icon" id="search-icon">
    <a href="javascript: void(0)">
      <i class="iconfont icon-search"></i>
    </a>
  </div>

  <div class="search-overlay hidden">
    <div class="search-content" tabindex="0">
      <div class="search-box">
        <div class="search-title">
          <!-- <span class="search-icon-input">
            <a href="javascript: void(0)">
              <i class="iconfont icon-search"></i>
            </a>
          </span> -->
          
            <input type="text" class="search-input" id="search-input" placeholder="搜索">
          
          <span class="search-close-icon" id="search-close-icon">
            <a href="javascript: void(0)">
              <i class="iconfont icon-close"></i>
            </a>
          </span>
        </div>
        <div class="search-result" id="search-result"></div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    var inputArea = document.querySelector("#search-input")
    var searchOverlayArea = document.querySelector(".search-overlay")

    // inputArea.onclick = function() {
    //   getSearchFile()
    //   this.onclick = null
    // }

    inputArea.onkeydown = function() {
      if(event.keyCode == 13)
        return false
    }

    function openOrHideSearchContent() {
      let isHidden = searchOverlayArea.classList.contains('hidden')
      if (isHidden) {
        searchOverlayArea.classList.remove('hidden')
        document.body.classList.add('hidden')
        inputArea.focus()
        getSearchFile()
      } else {
        searchOverlayArea.classList.add('hidden')
        document.body.classList.remove('hidden')
      }
    }

    function blurSearchContent(e) {
      if (e.target === searchOverlayArea) {
        openOrHideSearchContent()
      }
    }

    document.querySelector("#search-icon").addEventListener("click", openOrHideSearchContent, false)
    document.querySelector("#search-close-icon").addEventListener("click", openOrHideSearchContent, false)
    searchOverlayArea.addEventListener("click", blurSearchContent, false)

    var searchFunc = function (path, search_id, content_id) {
      'use strict';
      var $input = document.getElementById(search_id);
      var $resultContent = document.getElementById(content_id);
      $resultContent.innerHTML = "<ul><span class='local-search-empty'><span></ul>";
      // $resultContent.innerHTML = "<ul><span class='local-search-empty'>First search, index file loading, please wait...<span></ul>";
      $.ajax({
        // 0x01. load xml file
        url: path,
        dataType: "xml",
        success: function (xmlResponse) {
          // 0x02. parse xml file
          var datas = $("entry", xmlResponse).map(function () {
            return {
              title: $("title", this).text(),
              content: $("content", this).text(),
              url: $("url", this).text()
            };
          }).get();
          $resultContent.innerHTML = "";

          $input.addEventListener('input', function () {
            // 0x03. parse query to keywords list
            var str = '<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length <= 0) {
              return;
            }
            // 0x04. perform local searching
            datas.forEach(function (data) {
              var isMatch = true;
              var content_index = [];
              if (!data.title || data.title.trim() === '') {
                data.title = "Untitled";
              }
              var orig_data_title = data.title.trim();
              var data_title = orig_data_title.toLowerCase();
              var orig_data_content = data.content.trim().replace(/<[^>]+>/g, "");
              var data_content = orig_data_content.toLowerCase();
              var data_url = data.url;
              var index_title = -1;
              var index_content = -1;
              var first_occur = -1;
              // only match artiles with not empty contents
              if (data_content !== '') {
                keywords.forEach(function (keyword, i) {
                  index_title = data_title.indexOf(keyword);
                  index_content = data_content.indexOf(keyword);

                  if (index_title < 0 && index_content < 0) {
                    isMatch = false;
                  } else {
                    if (index_content < 0) {
                      index_content = 0;
                    }
                    if (i == 0) {
                      first_occur = index_content;
                    }
                    // content_index.push({index_content:index_content, keyword_len:keyword_len});
                  }
                });
              } else {
                isMatch = false;
              }
              // 0x05. show search results
              if (isMatch) {
                str += "<li><a href='" + data_url + "' class='search-result-title'><h2>" + orig_data_title + "</h2></a>";
                var content = orig_data_content;
                if (first_occur >= 0) {
                  // cut out 100 characters
                  var start = first_occur - 20;
                  var end = first_occur + 80;

                  if (start < 0) {
                    start = 0;
                  }

                  if (start == 0) {
                    end = 100;
                  }

                  if (end > content.length) {
                    end = content.length;
                  }

                  var match_content = content.substr(start, end);

                  // highlight all keywords
                  keywords.forEach(function (keyword) {
                    var regS = new RegExp(keyword, "gi");
                    match_content = match_content.replace(regS, "<span class=\"search-keyword\">" + keyword + "</span>");
                  });

                  str += "<h3 class=\"search-result-abstract\">" + match_content + "...</h3>"
                }
                str += "<hr></li>";
              }
            });
            str += "</ul>";
            if (str.indexOf('<li>') === -1) {
              return $resultContent.innerHTML = "<ul><span class='local-search-empty'>No result<span></ul>";
            }
            $resultContent.innerHTML = str;
          });
        },
        error: function(xhr, status, error) {
          $resultContent.innerHTML = ""
          if (xhr.status === 404) {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The search.xml file was not found, please refer to：<a href='https://github.com/leedom92/hexo-theme-leedom#configuration' target='_black'>configuration</a><span></ul>";
          } else {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The request failed, Try to refresh the page or try again later.<span></ul>";
          }
        }
      });
      $(document).on('click', '#search-close-icon', function() {
        $('#search-input').val('');
        $('#search-result').html('');
      });
    }

    var getSearchFile = function() {
        var path = "./search.xml";
        searchFunc(path, 'search-input', 'search-result');
    }
  </script>




    </div>
  </body>
</html>
